{"version":3,"file":"utils.js","sourceRoot":"../../../../src","sources":["components/Select/utils.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\n\nimport {KeyCode} from '../../constants';\nimport type {List, ListItemData} from '../List';\n\nimport {\n    FLATTEN_KEY,\n    GROUP_ITEM_MARGIN_TOP,\n    MOBILE_ITEM_HEIGHT,\n    SIZE_TO_ITEM_HEIGHT,\n} from './constants';\nimport type {Option, OptionGroup} from './tech-components';\nimport type {\n    SelectOption,\n    SelectOptionGroup,\n    SelectOptions,\n    SelectProps,\n    SelectSize,\n} from './types';\n\n// \"disable\" property needs to deactivate group title item in List\nexport type GroupTitleItem<T = any> = {label: string; disabled: true; data?: T};\n\nexport type FlattenOption = SelectOption | GroupTitleItem;\n\nexport type FlattenOptions = FlattenOption[] & {\n    [FLATTEN_KEY]: {\n        filteredOptions: FlattenOption[];\n    };\n};\n\nexport const isSelectGroupTitle = (\n    option?: SelectOption | SelectOptionGroup,\n): option is GroupTitleItem => {\n    return Boolean(option && 'label' in option);\n};\n\nexport const getFlattenOptions = (options: SelectOptions): FlattenOptions => {\n    const flatten = options.reduce<FlattenOption[]>((acc, option) => {\n        if ('label' in option) {\n            acc.push({label: option.label, disabled: true, data: option.data});\n            acc.push(...(option.options || []));\n        } else {\n            acc.push(option);\n        }\n\n        return acc;\n    }, []);\n    Object.defineProperty(flatten, FLATTEN_KEY, {\n        enumerable: false,\n        value: {},\n    });\n    return flatten as FlattenOptions;\n};\n\nexport const getPopupItemHeight = (args: {\n    getOptionHeight?: SelectProps['getOptionHeight'];\n    getOptionGroupHeight?: SelectProps['getOptionGroupHeight'];\n    size: SelectSize;\n    option: FlattenOption;\n    index: number;\n    mobile: boolean;\n}) => {\n    const {getOptionHeight, getOptionGroupHeight, size, option, index, mobile} = args;\n\n    let itemHeight = mobile ? MOBILE_ITEM_HEIGHT : SIZE_TO_ITEM_HEIGHT[size];\n\n    if (isSelectGroupTitle(option)) {\n        const marginTop = index === 0 ? 0 : GROUP_ITEM_MARGIN_TOP;\n        itemHeight = option.label === '' ? 0 : itemHeight;\n\n        return getOptionGroupHeight ? getOptionGroupHeight(option, index) : itemHeight + marginTop;\n    }\n\n    return getOptionHeight ? getOptionHeight(option, index) : itemHeight;\n};\n\nexport const getOptionsHeight = (args: {\n    getOptionHeight?: SelectProps['getOptionHeight'];\n    getOptionGroupHeight?: SelectProps['getOptionGroupHeight'];\n    size: NonNullable<SelectProps['size']>;\n    options: FlattenOption[];\n    mobile: boolean;\n}) => {\n    const {getOptionHeight, getOptionGroupHeight, size, options, mobile} = args;\n    return options.reduce((height, option, index) => {\n        return (\n            height +\n            getPopupItemHeight({getOptionHeight, getOptionGroupHeight, size, option, index, mobile})\n        );\n    }, 0);\n};\n\nconst getOptionText = (option: SelectOption): string => {\n    if (typeof option.content === 'string') {\n        return option.content;\n    }\n\n    if (typeof option.children === 'string') {\n        return option.children;\n    }\n\n    if (option.text) {\n        return option.text;\n    }\n\n    return option.value;\n};\n\nexport const getSelectedOptionsContent = (\n    options: SelectOptions,\n    value: string[],\n    renderSelectedOption?: SelectProps['renderSelectedOption'],\n): React.ReactNode => {\n    if (value.length === 0) {\n        return null;\n    }\n\n    const flattenSimpleOptions = options.filter(\n        (opt) => !isSelectGroupTitle(opt),\n    ) as SelectOption[];\n\n    const selectedOptions = value.reduce((acc, val) => {\n        const selectedOption = flattenSimpleOptions.find((opt) => opt.value === val);\n\n        acc.push(selectedOption || {value: val});\n        return acc;\n    }, [] as SelectOption[]);\n\n    if (renderSelectedOption) {\n        return selectedOptions.map((option, index) => {\n            return (\n                <React.Fragment key={option.value}>\n                    {renderSelectedOption(option, index)}\n                </React.Fragment>\n            );\n        });\n    } else {\n        return selectedOptions\n            .map((option) => {\n                return getOptionText(option);\n            })\n            .join(', ');\n    }\n};\n\nconst getTypedChildrenArray = (children: SelectProps['children']) => {\n    return React.Children.toArray(children) as (\n        | React.ReactElement<SelectOption, typeof Option>\n        | React.ReactElement<SelectOptionGroup, typeof OptionGroup>\n    )[];\n};\n\nconst getOptionsFromOptgroupChildren = (children: SelectOptionGroup['children']) => {\n    return (\n        React.Children.toArray(children) as React.ReactElement<SelectOption, typeof Option>[]\n    ).reduce((acc, {props}) => {\n        if ('value' in props) {\n            acc.push(props);\n        }\n\n        return acc;\n    }, [] as SelectOption[]);\n};\n\nexport const getOptionsFromChildren = (children: SelectProps['children']) => {\n    return getTypedChildrenArray(children).reduce(\n        (acc, {props}) => {\n            if ('label' in props) {\n                const options = props.options || getOptionsFromOptgroupChildren(props.children);\n                acc.push({\n                    options,\n                    label: props.label,\n                });\n            }\n\n            if ('value' in props) {\n                acc.push({...props});\n            }\n\n            return acc;\n        },\n        [] as (SelectOption | SelectOptionGroup)[],\n    );\n};\n\nexport const getNextQuickSearch = (keyCode: string, quickSearch: string) => {\n    // https://www.w3.org/TR/uievents-code/#key-alphanumeric-writing-system\n    const writingSystemKeyPressed = keyCode.length === 1;\n    const backspacePressed = keyCode === KeyCode.BACKSPACE;\n    let nextQuickSearch = '';\n\n    if (backspacePressed && quickSearch.length) {\n        nextQuickSearch = quickSearch.slice(0, quickSearch.length - 1);\n    } else if (writingSystemKeyPressed) {\n        nextQuickSearch = (quickSearch + keyCode).trim();\n    }\n\n    return nextQuickSearch;\n};\n\nconst getEscapedRegExp = (string: string) => {\n    return new RegExp(string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'i');\n};\n\nexport const findItemIndexByQuickSearch = (\n    quickSearch: string,\n    items?: ListItemData<FlattenOption>[],\n) => {\n    if (!items) {\n        return -1;\n    }\n\n    return items.findIndex((item) => {\n        if (isSelectGroupTitle(item)) {\n            return false;\n        }\n\n        if (item.disabled) {\n            return false;\n        }\n\n        const optionText = getOptionText(item);\n\n        return getEscapedRegExp(quickSearch).test(optionText);\n    });\n};\n\nexport const getListItems = (listRef: React.RefObject<List<FlattenOption>>) => {\n    return listRef?.current?.getItems() || [];\n};\n\nexport const getActiveItem = (listRef: React.RefObject<List<FlattenOption>>) => {\n    const items = getListItems(listRef);\n    const activeItemIndex = listRef?.current?.getActiveItem();\n\n    return typeof activeItemIndex === 'number' ? items[activeItemIndex] : undefined;\n};\n\nconst isOptionMatchedByFilter = (option: SelectOption, filter: string) => {\n    const lowerOptionText = getOptionText(option).toLocaleLowerCase();\n    const lowerFilter = filter.toLocaleLowerCase();\n\n    return lowerOptionText.indexOf(lowerFilter) !== -1;\n};\n\nexport const getFilteredFlattenOptions = (args: {\n    options: FlattenOption[];\n    filter: string;\n    filterOption?: SelectProps['filterOption'];\n}) => {\n    const {options, filter, filterOption} = args;\n    const filteredOptions = options.filter((option) => {\n        if (isSelectGroupTitle(option)) {\n            return true;\n        }\n\n        return filterOption\n            ? filterOption(option, filter)\n            : isOptionMatchedByFilter(option, filter);\n    });\n\n    return filteredOptions.reduce((acc, option, index) => {\n        const groupTitle = isSelectGroupTitle(option);\n        const previousGroupTitle = isSelectGroupTitle(acc[acc.length - 1]);\n        const isLastOption = index === filteredOptions.length - 1;\n\n        if (groupTitle && previousGroupTitle) {\n            acc.pop();\n        }\n\n        if (!groupTitle || (groupTitle && !isLastOption)) {\n            acc.push(option);\n        }\n\n        return acc;\n    }, [] as FlattenOption[]);\n};\n\nexport function scrollToItem(node: HTMLElement) {\n    const container = node.offsetParent;\n    if (container instanceof HTMLElement) {\n        const height = container.offsetHeight;\n        const scrollTop = container.scrollTop;\n\n        const top = node.offsetTop;\n        const bottom = top + node.offsetHeight;\n\n        if (bottom >= scrollTop + height) {\n            container.scrollTo({top: top - height + node.offsetHeight});\n        } else if (top <= scrollTop) {\n            container.scrollTo({top});\n        }\n    }\n\n    return true;\n}\n"]}