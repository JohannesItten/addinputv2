{"version":3,"file":"useQuickSearch.js","sourceRoot":"../../../../../src","sources":["components/Select/hooks/useQuickSearch.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAE/B,OAAO,EAAC,oBAAoB,EAAC,wBAAqB;AAClD,OAAO,EAAC,kBAAkB,EAAC,oBAAiB;AAQ5C,MAAM,CAAC,MAAM,cAAc,GAAG,CAAC,KAA0B,EAAE,EAAE;IACzD,MAAM,EAAC,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAC,GAAG,KAAK,CAAC;IACzC,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;IAC/C,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,KAAK,CAAC,QAAQ,EAAsB,CAAC;IAE/D,MAAM,WAAW,GAAG,KAAK,CAAC,WAAW,CACjC,CAAC,UAAkB,EAAE,EAAE;QACnB,YAAY,CAAC,KAAK,CAAC,CAAC;QAEpB,IAAI,UAAU,EAAE,CAAC;YACb,MAAM,SAAS,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,oBAAoB,CAAC,CAAC;YAC/E,QAAQ,CAAC,SAAS,CAAC,CAAC;QACxB,CAAC;IACL,CAAC,EACD,CAAC,KAAK,CAAC,CACV,CAAC;IAEF,MAAM,YAAY,GAAG,KAAK,CAAC,WAAW,CAClC,CAAC,CAAgB,EAAE,EAAE;QACjB,CAAC,CAAC,eAAe,EAAE,CAAC;QAEpB,MAAM,UAAU,GAAG,kBAAkB,CAAC,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;QAErD,IAAI,MAAM,KAAK,UAAU,EAAE,CAAC;YACxB,WAAW,CAAC,UAAU,CAAC,CAAC;YACxB,SAAS,CAAC,UAAU,CAAC,CAAC;QAC1B,CAAC;IACL,CAAC,EACD,CAAC,WAAW,EAAE,MAAM,CAAC,CACxB,CAAC;IAEF,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE;QACjB,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YACpB,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;QACvD,CAAC;aAAM,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC5B,SAAS,CAAC,EAAE,CAAC,CAAC;QAClB,CAAC;QAED,OAAO,GAAG,EAAE;YACR,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACpB,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;YAC1D,CAAC;QACL,CAAC,CAAC;IACN,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC;IAEnC,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE;QACjB,IAAI,CAAC,IAAI,EAAE,CAAC;YACR,YAAY,CAAC,KAAK,CAAC,CAAC;QACxB,CAAC;QAED,OAAO,GAAG,EAAE,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IACrC,CAAC,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;IAElB,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE;QACjB,QAAQ,CAAC,MAAM,CAAC,CAAC;IACrB,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAC;AAC3B,CAAC,CAAC","sourcesContent":["import * as React from 'react';\n\nimport {QUICK_SEARCH_TIMEOUT} from '../constants';\nimport {getNextQuickSearch} from '../utils';\n\ntype UseQuickSearchProps = {\n    onChange: (search: string) => void;\n    open?: boolean;\n    disabled?: boolean;\n};\n\nexport const useQuickSearch = (props: UseQuickSearchProps) => {\n    const {onChange, open, disabled} = props;\n    const [search, setSearch] = React.useState('');\n    const [timer, setTimer] = React.useState<number | undefined>();\n\n    const handleTimer = React.useCallback(\n        (nextSearch: string) => {\n            clearTimeout(timer);\n\n            if (nextSearch) {\n                const nextTimer = window.setTimeout(() => setSearch(''), QUICK_SEARCH_TIMEOUT);\n                setTimer(nextTimer);\n            }\n        },\n        [timer],\n    );\n\n    const handleSearch = React.useCallback(\n        (e: KeyboardEvent) => {\n            e.stopPropagation();\n\n            const nextSearch = getNextQuickSearch(e.key, search);\n\n            if (search !== nextSearch) {\n                handleTimer(nextSearch);\n                setSearch(nextSearch);\n            }\n        },\n        [handleTimer, search],\n    );\n\n    React.useEffect(() => {\n        if (open && !disabled) {\n            document.addEventListener('keydown', handleSearch);\n        } else if (!open && !disabled) {\n            setSearch('');\n        }\n\n        return () => {\n            if (open && !disabled) {\n                document.removeEventListener('keydown', handleSearch);\n            }\n        };\n    }, [handleSearch, open, disabled]);\n\n    React.useEffect(() => {\n        if (!open) {\n            clearTimeout(timer);\n        }\n\n        return () => clearTimeout(timer);\n    }, [open, timer]);\n\n    React.useEffect(() => {\n        onChange(search);\n    }, [onChange, search]);\n};\n"]}