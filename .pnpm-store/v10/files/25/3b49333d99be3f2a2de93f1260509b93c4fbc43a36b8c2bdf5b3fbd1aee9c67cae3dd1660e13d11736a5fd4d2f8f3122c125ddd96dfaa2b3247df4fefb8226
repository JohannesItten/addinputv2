{"version":3,"file":"index.js","sourceRoot":"../../../../../src","sources":["hooks/private/useTooltipVisible/index.ts"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\n\nimport {KeyCode} from '../../../constants';\nimport {useBoolean} from '../useBoolean';\n\nexport interface TooltipDelayProps {\n    openDelay?: number;\n    closeDelay?: number;\n}\n\nexport const useTooltipVisible = (\n    anchor: HTMLElement | null,\n    {\n        openDelay = 250,\n        closeDelay,\n        preventTriggerOnFocus = false,\n    }: TooltipDelayProps & {preventTriggerOnFocus?: boolean},\n) => {\n    const [tooltipVisible, showTooltip, hideTooltip] = useBoolean(false);\n    const timeoutRef = React.useRef<number>();\n    const isFocusWithinRef = React.useRef(false);\n\n    React.useEffect(() => {\n        if (!anchor) {\n            return undefined;\n        }\n\n        function handleMouseEnter() {\n            clearTimeout(timeoutRef.current);\n            timeoutRef.current = window.setTimeout(showTooltip, openDelay);\n        }\n\n        function handleMouseLeave() {\n            clearTimeout(timeoutRef.current);\n            timeoutRef.current = window.setTimeout(hideTooltip, closeDelay);\n        }\n\n        function handleFocusWithin(e: FocusEvent) {\n            if (!isFocusWithinRef.current && document.activeElement === e.target) {\n                isFocusWithinRef.current = true;\n                clearTimeout(timeoutRef.current);\n                showTooltip();\n            }\n        }\n\n        function handleBlurWithin(e: FocusEvent) {\n            if (\n                isFocusWithinRef.current &&\n                !(e.currentTarget as Element).contains(e.relatedTarget as Element)\n            ) {\n                isFocusWithinRef.current = false;\n                clearTimeout(timeoutRef.current);\n                hideTooltip();\n            }\n        }\n\n        function handleKeyDown(e: KeyboardEvent) {\n            if (e.key === KeyCode.ESCAPE) {\n                clearTimeout(timeoutRef.current);\n                hideTooltip();\n            }\n        }\n\n        anchor.addEventListener('mouseenter', handleMouseEnter);\n        anchor.addEventListener('mouseleave', handleMouseLeave);\n        anchor.addEventListener('keydown', handleKeyDown);\n\n        if (!preventTriggerOnFocus) {\n            anchor.addEventListener('focus', handleFocusWithin);\n            anchor.addEventListener('blur', handleBlurWithin);\n        }\n        return () => {\n            anchor.removeEventListener('mouseenter', handleMouseEnter);\n            anchor.removeEventListener('mouseleave', handleMouseLeave);\n            anchor.removeEventListener('focus', handleFocusWithin);\n            anchor.removeEventListener('blur', handleBlurWithin);\n            anchor.removeEventListener('keydown', handleKeyDown);\n        };\n    }, [anchor, showTooltip, hideTooltip, openDelay, closeDelay, preventTriggerOnFocus]);\n\n    return tooltipVisible;\n};\n"]}